import{c as W,r as $,a as Q,p as K,u as z,j as e,P as X,G as g,T as A,F as S,I as L,S as E,M as v,A as q,b as x,d as U,e as J,B as f,f as m,Q as Z,g as F,h as b,i as Y,E as ee,C as te,k as re,l as oe,m as ne,n as se,L as M,o as B,q as ae,s as H,t as ie,v as le,w as ce,x as de,y as pe,z as me,D as ue,H as he,J as xe,R as ge,K as R,N as fe,O as be}from"./vendor-CnXC7Rls.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const N={typography:{fontFamily:"'Outfit', system-ui, -apple-system, sans-serif",button:{textTransform:"none",fontWeight:600},h4:{fontWeight:700}},shape:{borderRadius:16},components:{MuiButton:{styleOverrides:{root:{borderRadius:"24px",boxShadow:"none","&:hover":{boxShadow:"0px 4px 12px rgba(0,0,0,0.1)"}}}},MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}},MuiCard:{styleOverrides:{root:{borderRadius:"24px"}}}}},O=W({...N,palette:{mode:"dark",primary:{main:"#31D6C6",background:"#181818"},secondary:{main:"#FFFFFF",background:"#121212"},background:{default:"rgba(0, 0, 0, 0)",paper:"#242424"},error:{main:$.A400}}}),_=W({...N,palette:{mode:"light",primary:{main:"#12645B",background:"#FFFFFF"},secondary:{main:"#000000",background:"#22B9AA"},background:{default:"rgba(0, 0, 0, 0)",paper:"#ffffff"},error:{main:$.A400}}}),k="https://content.duck-automata.com/dokimotes",je="https://docs.google.com/forms/d/e/1FAIpQLSfiXrRDeaorF4lXnVabic_foh1lejiVOfJXEqQYD-ujzMehJA/viewform?usp=dialog",ye="https://docs.google.com/forms/d/e/1FAIpQLScmOkrLqj1TTyys4TeZQeDahvPBkE6G_0Hddzct0hF7A8roFA/viewform?usp=dialog",ve=(t,r,a,i,o,s,l)=>`https://docs.google.com/forms/d/e/1FAIpQLSf_gtc9wDrZBojisaifppaOXE6wTuEWQdip3l4LaCMJMGusog/viewform?usp=pp_url&entry.1547084858=${encodeURIComponent(r)}&entry.666396598=${encodeURIComponent(a)}&entry.1767201088=${encodeURIComponent(i)}&entry.770719207=${encodeURIComponent(o)}&entry.1997731597=${encodeURIComponent(s)}&entry.1941144467=${encodeURIComponent(l)}&entry.869760669=${encodeURIComponent(t)}`;var C=(t=>(t.ALL="all",t.ANIMATED="animated",t.STATIC="static",t))(C||{}),w=(t=>(t.ALL="all",t.OFFICIAL="official",t.FANMADE="fan-made",t))(w||{});const Ce=t=>{const r=t.trim().split(`
`),a=r.shift().split("	").map(o=>o.trim());return r.map(o=>{const s=o.split("	");return a.reduce((l,d,u)=>{const n=s[u]===""?"Unknown":s[u];return d==="tags"?l[d]=n.split(",").map(c=>c.trim()):d==="Name"?l.name=n:l[d]=n,l},{})})},we=async()=>{try{const r=await(await fetch(`${k}/emotes.tsv`)).text();return Ce(r)}catch{return}},Ie=t=>({theme:"system",density:"standard",timeFormat:"relative",transcriptHeight:"100%",enableTagHelper:!1,defaultOffset:-20,sidebarOpen:!0,devMode:!1,membershipKey:"",membershipInfo:null,useVirtualList:!1,setTheme:r=>t({theme:r}),setDensity:r=>t({density:r}),setTimeFormat:r=>t({timeFormat:r}),setTranscriptHeight:r=>t({transcriptHeight:r}),setEnableTagHelper:r=>t({enableTagHelper:r}),setDefaultOffset:r=>t({defaultOffset:r}),setSidebarOpen:r=>t({sidebarOpen:r}),setDevMode:r=>t({devMode:r}),setMembershipKey:r=>t({membershipKey:r}),setMembershipInfo:r=>t({membershipInfo:r}),setUseVirtualList:r=>t({useVirtualList:r})}),Fe=t=>({searchText:"",setSearchText:r=>t({searchText:r}),emojiType:C.ALL,setEmojiType:r=>t({emojiType:r}),emojiSource:w.ALL,setEmojiSource:r=>t({emojiSource:r}),artistFilter:"",setArtistFilter:r=>t({artistFilter:r}),scrollIndex:0,setScrollIndex:r=>t({scrollIndex:r})}),y=Q()(K((t,r,a)=>({...Fe(t),...Ie(t)}),{name:"live-transcript-settings",partialize:t=>({theme:t.theme,density:t.density,timeFormat:t.timeFormat,transcriptHeight:t.transcriptHeight,enableTagHelper:t.enableTagHelper,defaultOffset:t.defaultOffset,sidebarOpen:t.sidebarOpen,devMode:t.devMode,membershipKey:t.membershipKey,membershipInfo:t.membershipInfo,useVirtualList:t.useVirtualList})})),ke=({artists:t})=>{const{searchText:r,emojiType:a,emojiSource:i,artistFilter:o}=y(z(n=>({searchText:n.searchText,emojiType:n.emojiType,emojiSource:n.emojiSource,artistFilter:n.artistFilter}))),s=y(n=>n.setSearchText),l=y(n=>n.setEmojiType),d=y(n=>n.setEmojiSource),u=y(n=>n.setArtistFilter);return e.jsx(X,{elevation:0,sx:{p:3,mb:4,borderRadius:4,background:n=>n.palette.mode==="dark"?"rgba(36, 36, 36, 0.45)":"rgba(255, 255, 255, 0.45)",backdropFilter:"blur(12px)",border:"1px solid",borderColor:n=>n.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.05)",boxShadow:"0 8px 32px rgba(0,0,0,0.05)"},children:e.jsxs(g,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[e.jsx(g,{size:{xs:12,md:3},children:e.jsx(A,{fullWidth:!0,label:"Search",variant:"outlined",value:r,onChange:n=>s(n.target.value),size:"small"})}),e.jsx(g,{size:{xs:6,md:3},children:e.jsxs(S,{fullWidth:!0,variant:"outlined",size:"small",children:[e.jsx(L,{id:"type-filter-label",children:"Type"}),e.jsxs(E,{labelId:"type-filter-label",id:"type-filter",value:a,label:"Type",name:"type",onChange:n=>l(n.target.value),children:[e.jsx(v,{value:C.ALL,children:"All Types"}),e.jsx(v,{value:C.ANIMATED,children:"Animated"}),e.jsx(v,{value:C.STATIC,children:"Static"})]})]})}),e.jsx(g,{size:{xs:6,md:3},children:e.jsxs(S,{fullWidth:!0,variant:"outlined",size:"small",children:[e.jsx(L,{id:"source-filter-label",children:"Source"}),e.jsxs(E,{labelId:"source-filter-label",id:"source-filter",value:i,label:"Source",name:"source",onChange:n=>d(n.target.value),children:[e.jsx(v,{value:w.ALL,children:"All Sources"}),e.jsx(v,{value:w.OFFICIAL,children:"Official"}),e.jsx(v,{value:w.FANMADE,children:"Fan-made"})]})]})}),e.jsx(g,{size:{xs:12,md:3},children:e.jsx(S,{fullWidth:!0,variant:"outlined",size:"small",children:e.jsx(q,{id:"artist-filter",options:t,value:o||null,onChange:(n,c)=>{u(c||"")},renderInput:n=>e.jsx(A,{...n,label:"Artist",variant:"outlined"}),size:"small",freeSolo:!1,autoHighlight:!0})})})]})})},D=128,Se=({emoji:t})=>{const r=U();if(!t)return null;const a=()=>{r(`/view/${t.emote_id}`)};return e.jsx(J,{arrow:!0,disableInteractive:!0,title:e.jsxs(e.Fragment,{children:[e.jsx(m,{color:"inherit",variant:"subtitle2",children:t.name}),e.jsxs(m,{variant:"caption",children:["Artist: ",t.artist]}),e.jsx("br",{})]}),children:e.jsx(f,{onClick:a,sx:{width:D,height:D,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:"pointer",padding:"4px","&:hover":{backgroundColor:i=>i.palette.mode==="dark"?"rgba(49, 214, 198, 0.15)":"rgba(18, 100, 91, 0.1)",transform:"scale(1.15) translateY(-4px)",zIndex:1,boxShadow:i=>i.palette.mode==="dark"?"0px 10px 20px rgba(49, 214, 198, 0.2)":"0px 10px 20px rgba(18, 100, 91, 0.15)",borderRadius:"16px"},transition:"all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1)",borderRadius:"12px"},children:e.jsx("img",{src:`${k}/${t.image_id}_t.webp`,alt:t.name,loading:"lazy",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})})})},Te=x.memo(Se),I=16,P=128,Ae=t=>e.jsx(f,{...t,sx:{display:"grid",gridTemplateColumns:`repeat(auto-fill, minmax(${P+I}px, 1fr))`,gap:`${I/2}px`,padding:`${I/2}px`}}),Le=t=>e.jsx(f,{...t,sx:{display:"flex",justifyContent:"center",alignItems:"center",height:`${P+I}px`}}),Ee=({emojis:t})=>e.jsx(f,{sx:{width:"100%",height:"100%"},children:e.jsx(Z,{data:t,components:{List:Ae,Item:Le},itemContent:(r,a)=>e.jsx(Te,{emoji:a})})}),Me=(t,r,a,i,o)=>t.filter(s=>{const l=s.name.toLowerCase().includes(r.toLowerCase()),d=s.tags.some(j=>j!==""&&(j.toLowerCase().includes(r.toLowerCase())||r.toLowerCase().includes(j.toLowerCase()))),u=r===""||l||d,n=a===C.ALL||s.type===a,c=i===w.ALL||s.source===i,p=o===""||s.artist===o;return u&&n&&c&&p}),Re=({emojis:t,emptyText:r})=>{const a=F("(max-width:768px)"),i=F("(max-width:1229px)"),o=a?"100vw":i?"75vw":"50vw",{searchText:s,emojiType:l,emojiSource:d,artistFilter:u}=y(z(p=>({searchText:p.searchText,emojiType:p.emojiType,emojiSource:p.emojiSource,artistFilter:p.artistFilter}))),n=x.useMemo(()=>{const p=new Set(t.map(j=>j.artist));return Array.from(p).sort()},[t]),c=x.useMemo(()=>Me(t,s,l,d,u),[s,l,d,u,t]);return e.jsxs(g,{container:!0,direction:"column",minWidth:o,sx:{py:3,height:"100vh"},children:[e.jsxs(g,{size:{xs:12},children:[e.jsx(m,{variant:"h3",component:"h1",gutterBottom:!0,align:"center",sx:{mb:4,fontWeight:800,background:p=>`linear-gradient(45deg, ${p.palette.primary.main}, #54e8d6)`,backgroundClip:"text",textFillColor:"transparent",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Doki Emote Finder"}),e.jsxs(f,{display:"flex",justifyContent:"center",gap:2,mb:4,children:[e.jsx(b,{variant:"outlined",color:"secondary",component:"a",href:je,target:"_blank",startIcon:e.jsx(Y,{}),sx:{borderRadius:"24px",textTransform:"none",fontWeight:600},children:"Suggest New Emote"}),e.jsx(b,{variant:"outlined",color:"secondary",component:"a",href:ye,target:"_blank",startIcon:e.jsx(ee,{}),sx:{borderRadius:"24px",textTransform:"none",fontWeight:600},children:"General Suggestion"})]})]}),e.jsx(g,{size:{xs:12},children:e.jsx(ke,{artists:n})}),e.jsx(g,{size:{xs:12},sx:{flexGrow:1,display:"flex",flexDirection:"column",minHeight:0},children:e.jsx(f,{sx:{flexGrow:1,border:"1px solid",borderColor:"divider",borderRadius:1,overflow:"hidden",position:"relative"},children:c.length>0?e.jsx(Ee,{emojis:c}):e.jsx(f,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:e.jsx(m,{children:r})})})}),e.jsx(g,{size:{xs:12},sx:{pt:2},children:e.jsxs(m,{variant:"caption",align:"center",sx:{mt:2},children:["Showing ",c.length," of ",t.length," emojis."]})})]})},Oe=({emoji:t})=>{const a=F("(max-width:768px)")?"90vw":"600px",[i,o]=x.useState({open:!1,message:""}),s=`${k}/${t.image_id}${t.image_ext}`,l=`${k}/${t.image_id}_p.webp`,d=`${t.emote_id}${t.image_ext}`,u=`${s}?download=true&name=${encodeURIComponent(d)}`,n=ve(t.emote_id,t.name,t.artist,t.credit,t.type,t.source,t.tags.join(", ")),c=t.credit.startsWith("https://"),p=t.type==="animated",j=async()=>{try{const T=await(await fetch(s)).blob();await navigator.clipboard.write([new ClipboardItem({[T.type]:T})]),o({open:!0,message:"Image copied to clipboard!"})}catch(h){o({open:!0,message:`Error: Could not copy image: ${h}.`})}},V=async()=>{try{await navigator.clipboard.writeText(l),o({open:!0,message:"Image link copied to clipboard!"})}catch(h){o({open:!0,message:`Error: Could not copy image link: ${h}.`})}},G=()=>{o({...i,open:!1})};return e.jsxs(e.Fragment,{children:[e.jsxs(te,{sx:{maxWidth:a,margin:{xs:"2rem auto",sm:"3rem auto"},boxShadow:"0 16px 40px rgba(0,0,0,0.12)",borderRadius:4,width:"100%",background:h=>h.palette.mode==="dark"?"rgba(36, 36, 36, 0.45)":"rgba(255, 255, 255, 0.45)",backdropFilter:"blur(12px)",border:"1px solid",borderColor:h=>h.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.05)"},children:[e.jsx(re,{component:"img",image:s,alt:t.name,sx:{width:"100%",height:"auto",backgroundColor:"transparent",p:2}}),e.jsxs(oe,{sx:{textAlign:"center"},children:[e.jsx(m,{gutterBottom:!0,variant:"h3",component:"h1",fontWeight:"700",children:t.name}),e.jsxs(m,{variant:"body1",color:"text.secondary",component:"p",children:[e.jsx("strong",{children:"Artist:"})," ",t.artist]}),c?e.jsxs(m,{variant:"body1",color:"text.secondary",component:"p",children:[e.jsx("strong",{children:"Credits:"})," ",e.jsx("a",{href:t.credit,target:"_blank",style:{wordWrap:"break-word"},children:t.credit})]}):e.jsxs(m,{variant:"body1",color:"text.secondary",component:"p",children:[e.jsx("strong",{children:"Credits:"})," ",t.credit]}),e.jsxs(m,{variant:"body1",color:"text.secondary",component:"p",children:[e.jsx("strong",{children:"Tags:"})," ",t.tags.join(", ")]})]}),e.jsx(ne,{sx:{justifyContent:"center",paddingBottom:"24px",paddingX:"24px"},children:e.jsxs(f,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"},width:"100%"},children:[!p&&e.jsx(b,{variant:"contained",disabled:p,startIcon:e.jsx(se,{}),onClick:j,fullWidth:!0,children:"Copy Image"}),e.jsx(b,{variant:"contained",startIcon:e.jsx(M,{}),onClick:V,fullWidth:!0,children:"Copy Link"}),e.jsx(b,{variant:"outlined",startIcon:e.jsx(M,{}),fullWidth:!0,component:"a",href:u,download:d,children:"Download Image"}),e.jsx(b,{component:B,to:"/",variant:"contained",startIcon:e.jsx(ae,{}),color:"black",fullWidth:!0,children:"Back to Gallery"})]})})]}),e.jsxs(f,{sx:{mt:2,textAlign:"center"},children:[e.jsx(m,{variant:"body1",sx:{mb:1.5,color:"text.secondary"},children:"Something wrong with this emote?"}),e.jsx(b,{variant:"outlined",color:"secondary",component:"a",href:n,target:"_blank",sx:{borderRadius:"24px",textTransform:"none",fontWeight:600},children:"Suggest an Edit"})]}),e.jsx(H,{open:i.open,autoHideDuration:3e3,onClose:G,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(ie,{message:i.message,sx:{backgroundColor:h=>h.palette.mode==="dark"?"rgba(255, 255, 255, 0.9)":"rgba(36, 36, 36, 0.9)",color:h=>h.palette.mode==="dark"?"#000000":"#ffffff",fontWeight:600,backdropFilter:"blur(8px)"}})})]})},_e=({emote_id:t})=>e.jsxs(e.Fragment,{children:[e.jsx(ce,{sx:{fontSize:80,color:"text.secondary",marginBottom:2}}),e.jsx(m,{variant:"h4",component:"h1",gutterBottom:!0,children:"Dokimote Not Found"}),e.jsxs(m,{color:"text.secondary",sx:{maxWidth:400,mb:3},children:['That emote with ID "',t,'" does not seem to exist. It might have been removed or the link is incorrect.']}),e.jsx(b,{component:B,to:"/",variant:"contained",color:"secondary",children:"Back to Gallery"})]}),De=({emojis:t,status:r})=>{const{emote_id:a}=le(),i=t.find(o=>o.emote_id===a);return e.jsx(f,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:r==="loading"?e.jsx(m,{children:"Loading"}):e.jsx(e.Fragment,{children:i===void 0?e.jsx(_e,{emote_id:a}):e.jsx(Oe,{emoji:i})})})},We=(t=300*1e3)=>{const[r,a]=x.useState(!1),i=async()=>{try{const o=await fetch("/dokimotes/version.json",{cache:"no-store"});if(!o.ok)return;const s=await o.json();s.buildTime>1771788894186&&(console.log("Update available!",s.buildTime,1771788894186),a(!0))}catch(o){console.error("Failed to check for updates:",o)}};return x.useEffect(()=>{i();const o=setInterval(i,t);return()=>clearInterval(o)},[t]),{updateAvailable:r}},$e=()=>{const{updateAvailable:t}=We(),r=U(),[a,i]=x.useState(!1),o=()=>{i(!0),r("/",{replace:!0}),setTimeout(()=>{window.location.reload(!0)},100)};return e.jsx(H,{open:t,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{width:"90%",maxWidth:500,top:{xs:"12px !important",sm:"24px !important"},left:"50% !important",transform:"translateX(-50%) !important"},children:e.jsxs(de,{severity:"info",variant:"filled",icon:!1,sx:{alignItems:"center",width:"100%",backgroundColor:"#17786E",backdropFilter:"blur(8px)",color:"#FFFFFF",fontWeight:500,boxShadow:"0 4px 20px rgba(0,0,0,0.4)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.2)"},action:e.jsx(b,{variant:"contained",size:"small",disabled:a,startIcon:a?e.jsx(me,{size:20,color:"inherit"}):e.jsx(ue,{}),onClick:o,sx:{backgroundColor:"#FFFFFF",color:"black",borderRadius:"8px",textTransform:"none",fontWeight:"bold",px:2,whiteSpace:"nowrap",boxShadow:"0 2px 10px rgba(0,0,0,0.3)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0 4px 12px rgba(0,0,0,0.4)"}},children:a?"Updating...":"Update"}),children:[e.jsx(pe,{children:"Update Available"}),"Refresh the page or click the update button to update the website."]})})},ze=()=>{const t=y(n=>n.theme);let a=F("(prefers-color-scheme: dark)")?O:_;t==="light"?a=_:t==="dark"&&(a=O);const[i,o]=x.useState([]),[s,l]=x.useState("loading"),d=s==="loading"?"Loading":s==="error"?"Error loading emoji's":"No emoji's found matching your criteria.",u=n=>{for(let c=n.length-1;c>0;c--){const p=Math.floor(Math.random()*(c+1));[n[c],n[p]]=[n[p],n[c]]}return n};return x.useEffect(()=>{we().then(n=>{if(n===void 0){l("error");return}else o(u(n)),l("ok")})},[]),e.jsxs(he,{theme:a,children:[e.jsx(xe,{}),e.jsx($e,{}),e.jsxs(ge,{children:[e.jsx(R,{path:"/view/:emote_id",element:e.jsx(De,{emojis:i,status:s})}),e.jsx(R,{path:"*",element:e.jsx(Re,{emojis:i,emptyText:d})})]})]})};fe.createRoot(document.getElementById("root")).render(e.jsx(x.StrictMode,{children:e.jsx(be,{basename:"dokimotes",children:e.jsx(ze,{})})}));
